{"version":3,"sources":["utils/api.js","components/MovieItem.jsx","components/MovieTabs.jsx","components/MoviesListWillWatch.jsx","components/Pagination.jsx","components/App.jsx","index.js"],"names":["API_URL","API_KEY_3","MovieItem","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","setMovieImage","backdrop_path","poster_path","concat","state","activeWillWatchBtn","_this2","_this$props","props","movie","removeMovie","toggleWillWatch","react_default","a","createElement","className","src","alt","title","vote_average","type","onClick","bind","setState","React","Component","MovieTabs","sort_by","updateSortBy","handleClick","value","getClassLink","classNames","active","MoviesListWillWatch","moviesList","length","map","key","Pagination","updatePreviousPage","updateNextPage","currentPage","totalPages","aria-label","aria-hidden","App","getMovies","fetch","page","then","response","json","data","movies","results","total_pages","removeFilm","updateMovies","filter","item","id","updateMoviesWillWatch","moviesWillWatch","updateMoviesListWillWatch","moviesListWillWatch","indexOf","push","splice","prevProps","prevState","components_MovieTabs","MovieItem_MovieItem","components_Pagination","components_MoviesListWillWatch","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.cb3dbc14.chunk.js","sourcesContent":["export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";","import React from 'react';\r\n\r\nexport default class MovieItem extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      activeWillWatchBtn: false\r\n    }\r\n  }\r\n\r\n  setMovieImage = (backdrop_path, poster_path) => {\r\n    if(!(backdrop_path && poster_path)) {\r\n      return 'https://bitsofco.de/content/images/2018/12/Screenshot-2018-12-16-at-21.06.29.png'\r\n    } else {\r\n      return `https://image.tmdb.org/t/p/w500${backdrop_path || poster_path}`\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    const { movie, removeMovie, toggleWillWatch} = this.props,\r\n          willWatchClass = 'btn btn-secondary btn-sm',\r\n          removeWatchClass = 'btn btn-success btn-sm';\r\n\r\n    return (\r\n      <div className=\"card\">\r\n        <img \r\n          className=\"card-img-top md-4\"\r\n          src={this.setMovieImage(movie.backdrop_path, movie.poster_path)}\r\n          alt=\"\"/>\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\" title={movie.title}>{movie.title}</h5>\r\n          <p className=\"mb-4\">Rating: {movie.vote_average}</p>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <button \r\n              className=\"btn btn-danger btn-sm\"\r\n              type=\"button\"\r\n              onClick={removeMovie.bind(null, movie)}\r\n            >\r\n              Remove film\r\n            </button>\r\n            <button \r\n              type=\"button\"\r\n              className={this.state.activeWillWatchBtn ? removeWatchClass : willWatchClass}\r\n              onClick={() => {\r\n                this.setState({\r\n                  activeWillWatchBtn: !this.state.activeWillWatchBtn\r\n                });\r\n                toggleWillWatch(movie);\r\n              }}\r\n            >\r\n              {this.state.activeWillWatchBtn ? 'Remove Watch' : 'Will Watch'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nconst MovieTabs = (props) => {\r\n  const { sort_by, updateSortBy } = props;\r\n\r\n  const handleClick = value => {\r\n    return () => {\r\n      updateSortBy(value)\r\n    }\r\n  }\r\n\r\n  const getClassLink = value => {\r\n    // return `nav-link ${sort_by === value ? 'active' : ''}`\r\n    return classNames('nav-link', 'btn',{'active': sort_by === value})\r\n  }\r\n\r\n  return (\r\n    <ul className=\"nav nav-pills\">\r\n      <li className=\"nav-item\">\r\n        <span \r\n          className={getClassLink(\"popularity.desc\")}\r\n          onClick={handleClick(\"popularity.desc\")}\r\n        >\r\n          Popularity\r\n        </span>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <span\r\n          className={getClassLink(\"revenue.desc\")}\r\n          onClick={handleClick(\"revenue.desc\")}\r\n        >\r\n          Revenue\r\n        </span>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <span\r\n          className={getClassLink(\"vote_average.desc\")}\r\n          onClick={handleClick(\"vote_average.desc\")}\r\n        >\r\n          Vote average\r\n        </span>\r\n      </li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default MovieTabs;","import React from 'react';\r\n\r\nconst MoviesListWillWatch = (props) => {\r\n\r\n  return (\r\n    <div className=\"col-12 col-md-3 movies-list\">\r\n      <h4 className=\"aside-title h5 mt-2 mb-4\">Will watch: {props.moviesList.length} {props.moviesList.length === 1 ? 'movie' : 'movies'}</h4>\r\n      <ul className=\"list-group\">\r\n        {props.moviesList.map((movie) => {\r\n          return (\r\n            <li className=\"list-group-item\" key={movie}>\r\n              {movie}\r\n            </li>\r\n          )\r\n        })} \r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MoviesListWillWatch;","import React from 'react';\r\n\r\nconst Pagination = (props) => {\r\n  const { updatePreviousPage, updateNextPage, currentPage, totalPages } = props;\r\n\r\n  return (\r\n    <nav aria-label=\"Page nanigation\">\r\n      <ul className=\"pagination mb-0 justify-content-center\">\r\n        <li \r\n          className=\"page-item\"\r\n          onClick={updatePreviousPage}\r\n        >\r\n          <span className=\"btn btn-info\" aria-label=\"Previous\">\r\n            <span aria-hidden=\"true\">Previous</span>\r\n          </span>\r\n        </li>\r\n        <li className=\"page-item\">\r\n          <span className=\"btn btn-light\">{currentPage} of {totalPages}</span>\r\n        </li>\r\n        <li \r\n          className=\"page-item\"\r\n          onClick={updateNextPage}\r\n        >\r\n          <span className=\"btn btn-info\" aria-label=\"Next\">\r\n            <span aria-hidden=\"true\">Next</span>\r\n          </span>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Pagination;","import React from \"react\";\nimport { API_URL, API_KEY_3} from \"../utils/api\";\nimport MovieItem from \"./MovieItem\";\nimport MovieTabs from \"./MovieTabs\";\nimport MovieListWillWatch from \"./MoviesListWillWatch\";\nimport Pagination from \"./Pagination\";\n\nexport default class App extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      movies: [],\n      moviesWillWatch: [],\n      moviesListWillWatch: [],\n      sort_by: \"popularity.desc\",\n      page: 1,\n      total_pages: 0\n    }\n\n    // console.log('constructor');\n\n    // this.removeFilm = this.removeFilm.bind(this);\n  }\n\n  // removeFilm(movie) {\n  //   const updateMovies = this.state.movies.filter((item) => {\n  //     return item.id !== movie.id;\n  //   })\n    \n  //   this.setState({\n  //     movies: updateMovies\n  //   })\n  // }\n\n  componentDidMount() {\n    // console.log('did mount');\n    this.getMovies();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(\"didUpdate\");\n    // console.log(\"prev\", prevProps, prevState);\n    // console.log(\"current\", this.props, this.state);\n\n    if(prevState.sort_by !== this.state.sort_by || prevState.page !== this.state.page) {\n     this.getMovies();\n    }\n  }\n\n  getMovies = () => {\n    fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`)\n      .then(response => response.json())\n      .then(data => {\n        this.setState({\n          movies: data.results,\n          total_pages: data.total_pages\n        })\n      });\n  }\n\n  removeFilm = (movie) => {\n    const updateMovies = this.state.movies.filter((item) => {\n      return item.id !== movie.id;\n    })\n    this.setState({\n      movies: updateMovies\n    })\n  }\n\n  toggleWillWatch = (movie) => {\n    const updateMoviesWillWatch = this.state.moviesWillWatch,\n          updateMoviesListWillWatch = this.state.moviesListWillWatch;\n\n    if(updateMoviesWillWatch.indexOf(movie.id) === -1) {\n      updateMoviesWillWatch.push(movie.id);\n      updateMoviesListWillWatch.push(movie.title);\n    } else {\n      updateMoviesWillWatch.splice(updateMoviesWillWatch.indexOf(movie.id), 1);\n      updateMoviesListWillWatch.splice(updateMoviesListWillWatch.indexOf(movie.title), 1);\n    }\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch,\n      moviesListWillWatch: updateMoviesListWillWatch\n    });\n  };\n\n  updateSortBy = (value) => {\n    this.setState({\n      sort_by: value\n    })\n  }\n\n  updatePreviousPage = () => {\n    if(this.state.page !== 1) {\n      this.setState({\n        page: this.state.page - 1\n      })\n    }\n  }\n\n  updateNextPage = () => {\n    if(this.state.page !== this.state.total_pages) {\n      this.setState({\n        page: this.state.page + 1\n      })\n    }\n    \n  }\n\n  render() {\n    // console.log('render');\n    // console.log(this.state);\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <h1 className=\"col-12 mb-4 text-justify app-title h3\">Movie app</h1>\n          <div className=\"col-12 col-md-9\">\n            <div className=\"row mb-3\">\n              <div className=\"col-12\">\n                <MovieTabs \n                  sort_by={this.state.sort_by}\n                  updateSortBy={this.updateSortBy}\n                />\n              </div>\n            </div>\n            <div className=\"row\">\n              {this.state.movies.map((movie) => {\n                return (\n                  <div className=\"col col-md-6 col-xl-4 mb-4\" key={movie.id}>\n                    <MovieItem \n                      movie={movie}\n                      removeMovie={this.removeFilm}\n                      toggleWillWatch={this.toggleWillWatch}\n                    />\n                  </div>\n                )\n              })}\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                <Pagination \n                  updatePreviousPage={this.updatePreviousPage}\n                  updateNextPage={this.updateNextPage}\n                  currentPage={this.state.page}\n                  totalPages={this.state.total_pages}\n                />\n              </div>\n            </div>\n          </div>\n          <MovieListWillWatch \n            moviesList={this.state.moviesListWillWatch}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport \"./index.scss\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}